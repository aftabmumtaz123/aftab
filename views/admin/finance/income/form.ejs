<div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-xl shadow-sm p-8 border border-gray-100">
        <h2 class="text-2xl font-bold mb-6 text-gray-800"><%= income._id ? 'Edit Income' : 'Add New Income' %></h2>
        
<div class="max-w-lg mx-auto mt-10">
    <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
        <!-- Header -->
        <div class="px-8 py-6 border-b border-gray-50 flex justify-between items-center bg-gray-50/50">
            <h2 class="text-xl font-bold text-gray-800"><%= income._id ? 'Edit Income' : 'New Income' %></h2>
            <a href="/admin/finance/income" class="text-gray-400 hover:text-gray-600 transition-colors">
                <i class="fas fa-times text-lg"></i>
            </a>
        </div>
        
        <form action="/admin/finance/income/<%= income._id ? 'edit/' + income._id : 'add' %>" method="POST" class="p-8 space-y-6">
            
            <!-- Big Amount Input -->
            <div class="bg-gray-50 rounded-xl p-6 text-center border border-gray-100">
                <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Total Amount</label>
                <div class="flex items-center justify-center">
                    <span class="text-3xl text-gray-400 font-light mr-2">Rs</span>
                    <input type="number" name="amount" value="<%= income.amount || '' %>" placeholder="0" 
                        class="w-48 text-5xl font-bold text-gray-800 bg-transparent text-center border-none focus:ring-0 p-0 placeholder-gray-200" 
                        required min="0">
                </div>
            </div>

            <!-- Source -->
            <div>
                <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Source</label>
                <input type="text" name="source" value="<%= income.source || '' %>" placeholder="e.g. Freelance Project" 
                    class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800 placeholder-gray-400" required>
            </div>

            <div class="grid grid-cols-2 gap-5">
                <!-- Date -->
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Date</label>
                    <input type="date" name="date" value="<%= income.date ? new Date(income.date).toISOString().split('T')[0] : new Date().toISOString().split('T')[0] %>" 
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800">
                </div>

                <!-- Wallet -->
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Deposit To</label>
                    <div class="relative">
                        <select name="wallet" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800 appearance-none bg-white" required>
                            <% if(locals.wallets) { %>
                                <% wallets.forEach(w => { %>
                                    <option value="<%= w._id %>" <%= income.wallet && income.wallet.toString() === w._id.toString() ? 'selected' : '' %>><%= w.name %></option>
                                <% }) %>
                            <% } %>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-400">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-5">
                <!-- Category -->
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Category</label>
                    <div class="relative">
                        <select name="category" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800 appearance-none bg-white">
                            <option value="">Select...</option>
                            <% if(locals.categories) { %>
                                <% categories.forEach(c => { %>
                                    <option value="<%= c._id %>" <%= income.category && income.category.toString() === c._id.toString() ? 'selected' : '' %>><%= c.name %></option>
                                <% }) %>
                            <% } %>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-400">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>

                <!-- Status -->
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Status</label>
                    <div class="relative">
                        <select name="status" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800 appearance-none bg-white">
                            <option value="Completed" <%= !income.status || income.status === 'Completed' ? 'selected' : '' %>>Completed</option>
                            <option value="Pending" <%= income.status === 'Pending' ? 'selected' : '' %>>Pending</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-400">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes -->
            <div>
                <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Note</label>
                <textarea name="notes" rows="2" placeholder="Optional notes..." 
                    class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-gray-800 placeholder-gray-400 resize-none"><%= income.notes || '' %></textarea>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="w-full py-4 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-green-500/30 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2">
                <i class="fas fa-check"></i>
                <%= income._id ? 'Update Income' : 'Record Income' %>
            </button>

        </form>
    </div>
</div>
